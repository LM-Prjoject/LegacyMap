services:
  - type: web
    name: legacy-backend
    env: docker
    plan: free
    autoDeploy: true
    region: singapore
    envVars:
      # === DATABASE CONFIG ===
      - key: DB_URL
        sync: false
      - key: DB_USERNAME
        sync: false
      - key: DB_PASSWORD
        sync: false

      # === MAIL CONFIG (Mailtrap) ===
      - key: SMTP_HOST
        sync: false
      - key: SMTP_PORT
        sync: false
      - key: SMTP_USERNAME
        sync: false
      - key: SMTP_PASSWORD
        sync: false      # password mailtrap
      - key: MAIL_FROM
        sync: false      # ví dụ: legacymap180@gmail.com

      # === GOOGLE OAUTH ===
      - key: GOOGLE_CLIENT_ID
        sync: false
      - key: GOOGLE_CLIENT_SECRET
        sync: false

      # === JWT & FRONTEND ===
      - key: JWT_SECRET
        sync: false
      - key: FRONTEND_URL
        value: "https://legacy-map-ebon.vercel.app"

      # === JVM NETWORK FIX ===
      - key: JAVA_TOOL_OPTIONS
        value: "-Djava.net.preferIPv4Stack=true"
